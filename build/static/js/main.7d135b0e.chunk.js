(this.webpackJsonpmedium=this.webpackJsonpmedium||[]).push([[0],{1001:function(e,t,n){},1004:function(e,t,n){},1005:function(e,t,n){},1008:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(63),l=n.n(r),o=n(1031),u=n(1030),i=n(519),s=n(1028),m=(n(536),n(537),n(296)),f=n.n(m),d=n(96),E=n.n(d),p=n(38),b=(n(555),E.a.initializeApp({apiKey:"AIzaSyBYRNUi68WQDQ-xNzZDZsLVsQfEogtcqWo",authDomain:"medium-clone-e47d2.firebaseapp.com",databaseURL:"https://medium-clone-e47d2.firebaseio.com",projectId:"medium-clone-e47d2",storageBucket:"medium-clone-e47d2.appspot.com",messagingSenderId:"870472339397",appId:"1:870472339397:web:b042750e17729e8d39c5ac",measurementId:"G-H8Q5EE09NQ"})),h=c.a.createContext(),g=function(e){var t=e.children,n=Object(a.useState)(null),r=Object(p.a)(n,2),l=r[0],o=r[1],u=Object(a.useState)(),i=Object(p.a)(u,2),s=i[0],m=i[1],f=Object(a.useState)(),d=Object(p.a)(f,2),b=d[0],g=d[1],O=Object(a.useState)(!1),j=Object(p.a)(O,2);j[0],j[1];return Object(a.useEffect)((function(){E.a.auth().onAuthStateChanged((function(e){o(e),g(e.email),m(e.displayName)}))}),[]),c.a.createElement(h.Provider,{value:{authuser:l,setAuthUser:o,userName:s,userEmail:b}},t)},O=function(){var e=Object(a.useContext)(h).authuser,t={signInFlow:"popup",signInOptions:[E.a.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccess:function(){return!1}}};return c.a.createElement("div",null,e?window.location.href="/":c.a.createElement(f.a,{uiConfig:t,firebaseAuth:E.a.auth()}))},j=(n(556),function(){var e=Object(a.useContext)(h),t=e.authuser,n=e.setAuthUser,r=t?"Log Out":"Sign In";return c.a.createElement("div",null,c.a.createElement(o.a,{bg:"light",variant:"light"},c.a.createElement(o.a.Brand,{href:"/"},"Medium Clone"),c.a.createElement(u.a,{className:"mr-auto"},c.a.createElement(u.a.Link,{href:"/"},"Home"),c.a.createElement(u.a.Link,{href:"#features"},"Popular"),c.a.createElement(u.a.Link,{href:"#pricing"},"Latest")),c.a.createElement(i.a,{style:{marginRight:"15px"},onClick:function(){t?(E.a.auth().signOut(),n(" ")):window.location.href="/signIn"},variant:t?"danger":"Warning"},r),c.a.createElement(s.a,null,c.a.createElement(s.a.Toggle,null),c.a.createElement(s.a.Menu,null,c.a.createElement(s.a.Item,{href:"/yourStories"},"Your Stories"),c.a.createElement(s.a.Item,{href:"/addPost"},"New Story")))))}),v=n(211),C=n(1032),k=(n(1001),n(212)),x=n.n(k),N=n(214),S=n.n(N),I=b.firestore();var y=function(e){var t=e.title,n=e.id,r=e.content,l=e.lastUpdated,o=e.imageUrl,u=e.likesCount,i=Object(a.useState)(u),s=Object(p.a)(i,2),m=s[0],f=s[1];return Object(a.useEffect)((function(){I.collection("posts").doc(n).update({likesCount:m})}),[m]),c.a.createElement(C.a,{className:"singlePost"},c.a.createElement("a",{href:"/post/"+n,style:{color:"inherit",textDecoration:"none"}},c.a.createElement(C.a.Img,{variant:"top",src:o}),c.a.createElement(C.a.Body,null,c.a.createElement(C.a.Title,null,t),c.a.createElement(C.a.Text,null,r),c.a.createElement("small",{className:"text-muted"},"Last updated ",l))),c.a.createElement(C.a.Footer,{className:"postFooter"},c.a.createElement(x.a,{onClick:function(){return f(m+1)}}),c.a.createElement("label",{htmlFor:""},m),c.a.createElement(S.a,{onClick:function(){return f(m-1)}})))},w=(n(516),b.firestore());var U=function(){var e=Object(a.useContext)(h),t=e.userName,n=(e.userEmail,Object(a.useState)([])),r=Object(p.a)(n,2),l=r[0],o=r[1];return Object(a.useEffect)((function(){w.collection("posts").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(v.a)({id:e.id},e.data())}));o(t)}))}),[]),c.a.createElement("div",{className:"feeds"},t?c.a.createElement("h3",null,"Welcome ",t):null,c.a.createElement("ul",null,l.map((function(e){return c.a.createElement("li",null,c.a.createElement(y,{key:e.id,id:e.id,title:e.title,content:e.content,imageUrl:e.imageUrl,likesCount:e.likesCount}))}))))},P=n(14),L=n.n(P),A=n(298),D=n(1033),R=n(1029),F=(n(1004),n(525)),B=b.firestore(),Q=function(){var e=Object(a.useContext)(h),t=e.authuser,n=e.userName,r=e.userEmail,l=Object(a.useState)(""),o=Object(p.a)(l,2),u=o[0],i=o[1],s=Object(a.useState)(""),m=Object(p.a)(s,2),f=m[0],d=m[1],E=Object(a.useState)(""),g=Object(p.a)(E,2),O=g[0],j=g[1],v=function(){var e=Object(A.a)(L.a.mark((function e(t){var n,a,c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],a=b.storage().ref(),c=a.child(n.name),e.next=5,c.put(n);case 5:return e.t0=i,e.next=8,c.getDownloadURL();case 8:e.t1=e.sent,(0,e.t0)(e.t1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(A.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{title:f,content:O,likesCount:0,imageUrl:u,name:n,emailId:r};case 2:return a=e.sent,e.next=5,B.collection("posts").add(a);case 5:return e.next=7,i("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",null,""!=t?c.a.createElement("div",{className:"container"},c.a.createElement("input",{type:"file",onChange:v}),c.a.createElement("form",{action:"/"},c.a.createElement("img",{src:u,alt:""}),c.a.createElement("form",{action:""},c.a.createElement(D.a,{value:f,onChange:function(e){d(e.target.value)},className:"title",placeholder:"Title"}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(D.a,{value:O,onChange:function(e){j(e.target.value)},className:"content",placeholder:"Tell your story..."})),c.a.createElement("br",null),c.a.createElement("br",null)," "!=t?c.a.createElement(R.a,{type:"submit",variant:"contained",onClick:C},"Post"):c.a.createElement(F.a,{variant:"danger"}," Please Sign In!!! "))):window.location.href="/signIn")},T=n(34),W=(n(1005),b.firestore()),z=function(){var e=Object(T.f)().id,t=Object(a.useState)(""),n=Object(p.a)(t,2),r=n[0],l=n[1],o=Object(a.useState)(""),u=Object(p.a)(o,2),i=u[0],s=u[1];return Object(a.useEffect)((function(){W.collection("posts").doc(e).get().then((function(e){r=e.data(),l(r),s(r.likesCount)}))}),[]),c.a.createElement("div",{className:"container"},c.a.createElement("h1",{className:"title"},r.title),c.a.createElement("img",{src:r.imageUrl,className:"image",alt:""}),c.a.createElement("br",null),c.a.createElement("p",{className:"content"},r.content),c.a.createElement("div",{className:"postFooter"},c.a.createElement(x.a,{onClick:function(){r.likesCount=r.likesCount+1,s(r.likesCount),W.collection("posts").doc(e).update({likesCount:r.likesCount})}}),c.a.createElement("label",null," ",i," "),c.a.createElement(S.a,{onClick:function(){r.likesCount=r.likesCount-1,s(r.likesCount),W.collection("posts").doc(e).update({likesCount:r.likesCount})}})))},G=b.firestore(),H=function(){var e=Object(a.useContext)(h),t=(e.authuser,e.userName),n=e.userEmail,r=Object(a.useState)([]),l=Object(p.a)(r,2),o=l[0],u=l[1];return Object(a.useEffect)((function(){n&&G.collection("posts").where("emailId","==",n).get().then((function(e){var t=e.docs.map((function(e){return Object(v.a)({id:e.id},e.data())}));u(t)}))}),[n]),console.log(o),c.a.createElement("div",{className:"feeds"},c.a.createElement("h3",null,"Welcome ",t),c.a.createElement("ul",null,o.map((function(e){return c.a.createElement("li",null,c.a.createElement(y,{key:e.id,id:e.id,title:e.title,content:e.content,imageUrl:e.imageUrl,likesCount:e.likesCount}))}))))},J=n(203),M=n(28),V=function(e){var t=e.component,n=Object(M.a)(e,["component"]),r=Object(a.useContext)(h),l=(r.authuser,r.userName);return console.log("From Private Route: ",l),c.a.createElement(T.b,Object.assign({},n,{render:function(e){return" "!=l?c.a.createElement(t,e):c.a.createElement(T.a,{to:"/signIn"})}}))};var Y=function(){return c.a.createElement(g,null,c.a.createElement(J.a,null,c.a.createElement(j,null),c.a.createElement(T.b,{path:"/",exact:!0,component:U}),c.a.createElement(T.b,{path:"/post/:id",component:z}),c.a.createElement(V,{path:"/addPost",exact:!0,component:Q}),c.a.createElement(T.b,{path:"/signIn",exact:!0,component:O}),c.a.createElement(V,{path:"/yourStories",exact:!0,component:H})))};l.a.render(c.a.createElement(Y,null),document.getElementById("root"))},243:function(e,t){},259:function(e,t){},516:function(e,t,n){},531:function(e,t,n){e.exports=n(1008)},565:function(e,t){},567:function(e,t){},572:function(e,t){},574:function(e,t){},595:function(e,t){},597:function(e,t){},625:function(e,t){},627:function(e,t){},628:function(e,t){},634:function(e,t){},636:function(e,t){},654:function(e,t){},656:function(e,t){},668:function(e,t){},671:function(e,t){},787:function(e,t){},899:function(e,t){},901:function(e,t){},906:function(e,t){},929:function(e,t){},931:function(e,t){}},[[531,1,2]]]);
//# sourceMappingURL=main.7d135b0e.chunk.js.map